fileVersion: 1
id: "303"
isDisabled: false
metadata:
  defaultStorageLocation: null
  error: null
  nodeMetadataSpec: |
    capitalized: API Call
    short: API
    plural: Excel Files
    tagColor: 'orange'

    deployStrategy: advanced

    config:

    - groupName: Options
      items:
     
      - displayName: Snowflake EXTERNAL ACCESS INTEGRATION Name
        attributeName: extIntegration
        type: textBox
        default: "COALESCE_API_INTEGRATION"

      - displayName: Bearer token/Token/API-key Authorization
        type: toggleButton
        attributeName: bauth
        enableIf: "{%if config.cauth %} false {%else%} true {%endif%}"
        default: false

      - displayName: ClientID/Secret Authorization
        type: toggleButton
        attributeName: cauth
        enableIf: "{%if config.bauth %} false {%else%} true {%endif%}"
        default: false

      - displayName: Snowlake secret for API token 
        attributeName: api_token
        type: textBox
        default: "COALESCE_API_TOKEN"
        enableIf: "{%if config.bauth == true %} true {%else%} false  {%endif%}"

      - displayName: HTTP headers(Ex:Authorization,x-api-key')
        attributeName: headertype
        type: textBox
        default: "Authorization"
        enableIf: "{%if config.bauth == true or config.cauth == true%} true {%else%} false  {%endif%}"   

      - displayName: Snowlake secret for API Client ID 
        attributeName: api_id
        type: textBox
        default: "COALESCE_API_TOKEN"
        enableIf: "{%if config.cauth == true %} true {%else%} false  {%endif%}"

      - displayName: Snowlake secret for API Client password
        attributeName: sapi_token
        type: textBox
        default: "COALESCE_API_TOKEN"
        isRequired: false
        enableIf: "{%if config.cauth == true %} true {%else%} false  {%endif%}"
      
      - displayName: Method
        attributeName: method
        type: dropdownSelector
        default: "get"
        options:
        - "get"
        - "post"
        - "put"
        isRequired: true

      - displayName: URI
        attributeName: uri
        type: textBox
        placeholder: Ex:'https://app.coalescesoftware.io/api/v1/runs'
        isRequired: true
      
      - displayName: Forcibly add security credentials in header
        type: toggleButton
        attributeName: forceauth
        default: false
        enableif: "{%if config.bauth == false and config.cauth == false %}"
      
      - type: label
        displayName: ⚠️ It is a security threat to add tokens/credentials in headers.If you want to proceed aware of the risk enable 'Forcibly add security credentials in header' toggle
        attributeName: warlabel
        enableIf:  "{%if ('Authorization' in config.headers or 'x-api-key' in config.headers) and ((config.forceauth == false or config.forceauth is undefined))%} true {%else%} false {%endif%}"
     
      - displayName: Headers
        attributeName: headers
        type: textBox
        default: ''
        isRequired: false
      
      - displayName: Payload
        attributeName: payload
        type: textBox
        default: ''
        isRequired: false

    systemColumns:

    - displayName: 'URI'
      attributeName: uri
      transform: ''
      dataType: STRING
      placement: beginning


    - displayName: 'RESPONSE'
      attributeName: value
      transform: ''
      dataType: VARIANT
      placement: end
name: API
type: NodeType
